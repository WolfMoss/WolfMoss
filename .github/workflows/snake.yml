name: Generate Snake Animation

on:
  schedule:
    # æ¯4å°æ—¶è‡ªåŠ¨æ›´æ–°ä¸€æ¬¡åŠ¨ç”»
    - cron: "0 */4 * * *"
  # æ‰‹åŠ¨è§¦å‘
  workflow_dispatch:
  # ä»£ç æ›´æ–°æ—¶è§¦å‘
  push:
    branches: [main]

jobs:
  generate:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        
      - name: Generate Snake Animation
        uses: Platane/snk@v3
        with:
          # é»‘è‰²ä¸»é¢˜ï¼ˆæ”¯æŒæµ…è‰²å’Œæ·±è‰²ï¼‰
          github_user_name: ${{ secrets.GH_USERNAME }}
          # è¾“å‡ºæ–‡ä»¶è·¯å¾„
          outputs: |
            ./github-contribution-grid-snake.svg
            ./github-contribution-grid-snake-dark.svg
      
      - name: Commit and Push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          
          # æ·»åŠ æ–°ç”Ÿæˆçš„æ–‡ä»¶
          git add ./github-contribution-grid-snake*.svg
          
          # æ£€æŸ¥æ˜¯å¦æœ‰æ–‡ä»¶å˜æ›´
          if git diff --cached --stat | grep -q .; then
            git commit -m "ğŸ Update snake animation"
            git push
            echo "âœ… Snake animation updated"
          else
            echo "â„¹ï¸ No changes to snake animation"
          fi
